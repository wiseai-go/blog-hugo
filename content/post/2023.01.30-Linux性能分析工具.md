---
author: "wiseai"
title: "Linux性能分析工具"
date: 2023-01-30T18:04:19+08:00
description: ""
tags:
- Linux
- 命令
categories:
- Linux学习
- Linux命令
draft: false
---

<img src="/images/xnfx1.png" />

### vmstat--虚拟内存统计
vmstat（VirtualMeomoryStatistics，虚拟内存统计）是 Linux 中监控内存的常用工具,可对操作系统的虚拟内存、进程、CPU 等的整体情况进行监视。vmstat 的常规用法：vmstat interval times 即每隔 interval 秒采样一次，共采样 times 次，如果省略 times，则一直采集数据，直到用户手动停止为止。
```
procs -----------memory---------- ---swap-- -----io---- -system-- ------cpu-----
 r  b   swpd   free   buff  cache   si   so    bi    bo   in   cs us sy id wa st
 2  0 1526016 161916  48016 1694424    2   14   257    73   34   90 13  7 80  0  0
 4  0 1526016 159584  48044 1694552    0    0     1   108 14151 28405 17 13 70  0  0
 1  0 1526016 158608  48064 1694568    0    0     1   426 14277 27948 19 12 69  0  0
 4  0 1526016 157600  48072 1694576    3    0     3    19 13744 27644 18 12 69  0  0 
```

可以使用 ctrl+c 停止 vmstat 采集数据。

第一行显示了系统自启动以来的平均值，第二行开始显示现在正在发生的情况，接下来的行会显示每5秒间隔发生了什么，每一列的含义在头部。

* procs：r 这一列显示了多少进程在等待cpu，b列显示多少进程正在不可中断的休眠（等待IO）。

* memory：swapd 列显示了多少块被换出了磁盘（页面交换），剩下的列显示了多少块是空闲的（未被使用），多少块正在被用作缓冲区，以及多少正在被用作操作系统的缓存。

* swap：显示交换活动：每秒有多少块正在被换入（从磁盘）和换出（到磁盘）。

* io：显示了多少块从块设备读取（bi）和写出（bo）,通常反映了硬盘I/O。

* system：显示每秒中断(in)和上下文切换（cs）的数量。

* cpu：显示所有的cpu时间花费在各类操作的百分比，包括执行用户代码（非内核），执行系统代码（内核），空闲以及等待IO。

内存不足的表现：free  memory 急剧减少，回收 buffer 和 cache 也无济于事，大量使用交换分区（swpd）,页面交换（swap）频繁，读写磁盘数量（io）增多，缺页中断（in）增多，上下文切换（cs）次数增多，等待IO的进程数（b）增多，大量CPU时间用于等待IO（wa）

---

